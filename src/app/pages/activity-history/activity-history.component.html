<div style="display: grid; gap: 1.5em">
  <ng-container
    [ngSwitch]="activity.activityType"
    *ngFor="let activity of activity$ | async as a"
  >
    <custom-card
      *ngSwitchCase="activityType.userTask"
      glyphicon="user"
      [headerTitle]="
        a[activity.parentUserTaskActivity]?.user
          ? a[activity.parentUserTaskActivity].user.firstName +
            ' ' +
            a[activity.parentUserTaskActivity].user.lastName
          : activity.user
          ? activity.user.firstName + ' ' + activity.user.lastName
          : ''
      "
      altHeaderTitle="{{ 'NO_ASSIGN_USER_TASK' | translate }}"
      headerSubTitle="{{
        activity.startTime || activity.startTime | date : 'short'
      }}"
    >
      <div
        innerHTML="{{
          'ACTIVITY_MOVES_TO'
            | translate : { p: p.activityName, c: activity.activityName }
        }}"
        *ngIf="a[activity.parentUserTaskActivity] as p; else parentTask"
      ></div>

      <ng-template #parentTask>
        {{ "START_ACTIVITY_EVENT_NAME" | translate }}
        <b>{{ activity.activityName }}</b>
      </ng-template>
    </custom-card>

    <custom-card
      *ngSwitchCase="activityType.startEvent"
      [headerTitle]="activity.activityName"
      altHeaderTitle="{{ 'START_ACTIVITY_EVENT_NAME' | translate }}"
      glyphicon="log-in"
      headerSubTitle="{{ activity.startTime | date : 'short' }}"
    >
      <div
        [innerHTML]="
          'START_ACTIVITY_FLOW'
            | translate
              : {
                  name:
                    subProcessActivity.get(
                      activity.parentActivityInstanceId.split(':')[0]
                    )?.activityName ||
                    subProcessActivity.get(
                      activity.parentActivityInstanceId.split(':')[0]
                    )?.activityId ||
                    activity.activityName ||
                    activity.activityId
                }
        "
      ></div>
    </custom-card>

    <ng-template
      *ngSwitchCase="activityType.endEvent"
      [ngTemplateOutlet]="endEventType"
    ></ng-template>
    <ng-template
      *ngSwitchCase="activityType.noneEndEvent"
      [ngTemplateOutlet]="endEventType"
    ></ng-template>
    <ng-template #endEventType>
      <custom-card
        [headerTitle]="activity.activityName"
        altHeaderTitle="{{ 'END_ACTIVITY_EVENT_NAME' | translate }}"
        glyphicon="log-out"
        headerSubTitle="{{ activity.startTime | date : 'short' }}"
      >
        <div
          [innerHTML]="
            'END_ACTIVITY_FLOW'
              | translate
                : {
                    name:
                      subProcessActivity.get(
                        activity.parentActivityInstanceId.split(':')[0]
                      )?.activityName ||
                      subProcessActivity.get(
                        activity.parentActivityInstanceId.split(':')[0]
                      )?.activityId ||
                      activity.activityName ||
                      activity.activityId
                  }
          "
        ></div>
      </custom-card>
    </ng-template>

    <custom-card
      *ngSwitchCase="activityType.serviceTask"
      altHeaderTitle="{{ 'SERVICE_ACTIVITY_EVENT_NAME' | translate }}"
      [headerTitle]="activity.activityName"
      glyphicon="cog"
      headerSubTitle="{{ activity.startTime | date : 'short' }}"
    >
    </custom-card>

    <custom-card
      *ngSwitchCase="activityType.businessRuleTask"
      altHeaderTitle="{{ 'BUSINESS_ACTIVITY_EVENT_NAME' | translate }}"
      [headerTitle]="activity.activityName"
      glyphicon="list-alt"
      headerSubTitle="{{ activity.startTime | date : 'short' }}"
    >
    </custom-card>
  </ng-container>
</div>
